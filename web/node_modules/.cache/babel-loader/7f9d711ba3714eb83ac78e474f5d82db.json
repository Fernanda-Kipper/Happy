{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nanda\\\\OneDrive\\\\\\xC1rea de Trabalho\\\\Nanda\\\\Happy\\\\web\\\\src\\\\Pages\\\\CreateOrphanage.tsx\";\nimport React, { useState } from \"react\";\nimport { Map, Marker, TileLayer } from 'react-leaflet';\nimport L from 'leaflet';\nimport { FiPlus } from \"react-icons/fi\";\nimport mapMarkerImg from \"../images/map_marker.svg\";\nimport '../styles/pages/create-orphanage.css';\nimport Sidebar from \"../components/Sidebar\";\nimport api from \"../services/api\";\nimport { useHistory } from \"react-router-dom\";\nconst happyMapIcon = L.icon({\n  iconUrl: mapMarkerImg,\n  iconSize: [58, 68],\n  iconAnchor: [29, 68],\n  popupAnchor: [0, -60]\n});\nexport default function CreateOrphanage() {\n  const [position, setPosition] = useState({\n    latitude: 0,\n    longitude: 0\n  });\n  const [name, setName] = useState('');\n  const [about, setAbout] = useState('');\n  const [instructions, setInstructions] = useState('');\n  const [opening_hours, setOpeningHours] = useState('');\n  const [open_on_weekends, setOpenOnWeekends] = useState(true);\n  const [images, setImages] = useState([]);\n  const [previewImages, setPreviewImages] = useState([]);\n  const {\n    latitude,\n    longitude\n  } = position;\n  const history = useHistory();\n\n  function handleMapClick(event) {\n    const {\n      lat,\n      lng\n    } = event.latlng;\n    setPosition({\n      latitude: lat,\n      longitude: lng\n    });\n  }\n\n  async function handleSubmit(event) {\n    const alfabet = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'];\n    const veryfingHoursBar = opening_hours.includes('/');\n    const [veryfingHoursABC, setVeryfingHoursABC] = useState(false);\n    alfabet.forEach(letter => {\n      if (opening_hours.includes(letter)) {\n        setVeryfingHoursABC(true);\n      }\n    });\n\n    if (opening_hours.length !== 11 || veryfingHoursBar === false) {\n      alert('Formate o horário de atendimento no modelo indicado (00:00/00:00)');\n      return;\n    }\n\n    event.preventDefault();\n    const data = new FormData();\n    data.append('name', name);\n    data.append('latitude', String(latitude));\n    data.append('longitude', String(longitude));\n    data.append('about', about);\n    data.append('instructions', instructions);\n    data.append('opening_hours', opening_hours);\n    data.append('open_on_weekends', String(open_on_weekends));\n    images.forEach(image => {\n      data.append('images', image);\n    });\n    await api.post('orphanages', data);\n    alert('Cadastro realizado com sucesso!');\n    history.push('/app');\n  }\n\n  function handleSelectedImages(event) {\n    if (!event.target.files) {\n      return;\n    }\n\n    const images1 = Array.from(event.target.files);\n    setImages(images1);\n    const imagesPreview = images1.map(image => {\n      return URL.createObjectURL(image);\n    });\n    setPreviewImages(imagesPreview);\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"page-create-orphanage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"create-orphanage-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }, \"Dados\"), /*#__PURE__*/React.createElement(Map, {\n    center: [-27.6987904, -48.5011278],\n    zoom: 13,\n    style: {\n      width: '100%',\n      height: 280\n    },\n    onClick: handleMapClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TileLayer, {\n    url: \"https://a.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }), position.latitude !== 0 && /*#__PURE__*/React.createElement(Marker, {\n    interactive: false,\n    icon: happyMapIcon,\n    position: [position.latitude, position.longitude],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 18\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 15\n    }\n  }, \"Nome\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"name\",\n    value: name,\n    onChange: e => setName(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"about\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, \"Sobre \", /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 44\n    }\n  }, \"M\\xE1ximo de 300 caracteres\")), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"name\",\n    maxLength: 300,\n    value: about,\n    onChange: e => setAbout(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 15\n    }\n  }, \"Fotos\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"images-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 15\n    }\n  }, previewImages.map(image => {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: image,\n      src: image,\n      alt: name,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 21\n      }\n    });\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"image[]\",\n    className: \"new-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiPlus, {\n    size: 24,\n    color: \"#15b6d6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(\"input\", {\n    multiple: true,\n    type: \"file\",\n    id: \"image[]\",\n    onChange: handleSelectedImages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"fieldset\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"legend\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \"Visita\\xE7\\xE3o\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"instructions\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 15\n    }\n  }, \"Instru\\xE7\\xF5es\"), /*#__PURE__*/React.createElement(\"textarea\", {\n    id: \"instructions\",\n    value: instructions,\n    onChange: e => setInstructions(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"opening_hours\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, \"Horario de Funcionamento\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"opening_hours\",\n    value: opening_hours,\n    onChange: e => setOpeningHours(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"open_on_weekends\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }, \"Atende fim de semana\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"button-select\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: open_on_weekends ? 'active' : '',\n    onClick: () => setOpenOnWeekends(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, \"Sim\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: !open_on_weekends ? 'active' : '',\n    onClick: () => setOpenOnWeekends(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, \"N\\xE3o\")))), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"confirm-button\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, \"Confirmar\"))));\n} // return `https://a.tile.openstreetmap.org/${z}/${x}/${y}.png`;","map":{"version":3,"sources":["C:/Users/nanda/OneDrive/Área de Trabalho/Nanda/Happy/web/src/Pages/CreateOrphanage.tsx"],"names":["React","useState","Map","Marker","TileLayer","L","FiPlus","Sidebar","api","useHistory","happyMapIcon","icon","iconUrl","mapMarkerImg","iconSize","iconAnchor","popupAnchor","CreateOrphanage","position","setPosition","latitude","longitude","name","setName","about","setAbout","instructions","setInstructions","opening_hours","setOpeningHours","open_on_weekends","setOpenOnWeekends","images","setImages","previewImages","setPreviewImages","history","handleMapClick","event","lat","lng","latlng","handleSubmit","alfabet","veryfingHoursBar","includes","veryfingHoursABC","setVeryfingHoursABC","forEach","letter","length","alert","preventDefault","data","FormData","append","String","image","post","push","handleSelectedImages","target","files","images1","Array","from","imagesPreview","map","URL","createObjectURL","width","height","e","value"],"mappings":"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","sourcesContent":["import React, { FormEvent, useState, ChangeEvent } from \"react\";\nimport { Map, Marker, TileLayer } from 'react-leaflet';\nimport L from 'leaflet';\nimport { LeafletMouseEvent } from 'leaflet';\n\nimport { FiPlus } from \"react-icons/fi\";\n\nimport mapMarkerImg from '../images/map_marker.svg';\n\nimport '../styles/pages/create-orphanage.css';\nimport Sidebar from \"../components/Sidebar\";\nimport api from \"../services/api\";\nimport { useHistory } from \"react-router-dom\";\n\nconst happyMapIcon = L.icon({\n  iconUrl: mapMarkerImg,\n\n  iconSize: [58, 68],\n  iconAnchor: [29, 68],\n  popupAnchor: [0, -60]\n})\n\nexport default function CreateOrphanage() {\n  const [position, setPosition] = useState({latitude: 0, longitude: 0})\n  const [name, setName] = useState('')\n  const [about, setAbout] = useState('')\n  const [instructions, setInstructions] = useState('')\n  const [opening_hours, setOpeningHours] = useState('')\n  const [open_on_weekends, setOpenOnWeekends] = useState(true)\n  const [images, setImages] = useState<File[]>([])\n  const [previewImages, setPreviewImages] = useState<string[]>([])\n  const {latitude, longitude} = position\n\n  const history = useHistory()\n\n  function handleMapClick(event: LeafletMouseEvent){\n    const {lat, lng} = event.latlng\n    setPosition({\n      latitude: lat,\n      longitude: lng\n    })\n  }\n\n  async function handleSubmit(event: FormEvent){\n    const alfabet = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']\n    const veryfingHoursBar = opening_hours.includes('/')\n    const [veryfingHoursABC, setVeryfingHoursABC] = useState(false)\n    alfabet.forEach(letter =>{\n      if(opening_hours.includes(letter)){\n        setVeryfingHoursABC(true)\n      }\n    })\n    \n    if(opening_hours.length !== 11 || veryfingHoursBar === false ){\n      alert('Formate o horário de atendimento no modelo indicado (00:00/00:00)')\n      return;\n    }\n\n    event.preventDefault()\n    const data = new FormData();\n\n    data.append('name', name)\n    data.append('latitude', String(latitude))\n    data.append('longitude', String(longitude))\n    data.append('about', about)\n    data.append('instructions', instructions)\n    data.append('opening_hours', opening_hours)\n    data.append('open_on_weekends', String(open_on_weekends))\n  \n    images.forEach(image =>{\n      data.append('images', image)\n    })\n  \n    await api.post('orphanages', data)\n\n    alert('Cadastro realizado com sucesso!')\n\n    history.push('/app')\n  \n  }\n\n  function handleSelectedImages(event: ChangeEvent<HTMLInputElement>){\n    if(!event.target.files){\n      return;\n    }\n    const images1 = Array.from(event.target.files)\n    setImages(images1)\n\n    const imagesPreview = images1.map(image => {\n      return URL.createObjectURL(image)\n    })\n\n    setPreviewImages(imagesPreview)\n  }\n\n  return (\n    <div id=\"page-create-orphanage\">\n      <Sidebar></Sidebar>\n\n      <main>\n        <form onSubmit={handleSubmit} className=\"create-orphanage-form\">\n          <fieldset>\n            <legend>Dados</legend>\n\n            <Map \n              center={[-27.6987904,-48.5011278]}\n              zoom={13}\n              style={{ width: '100%', height: 280 }}\n              onClick={handleMapClick}\n            >\n              <TileLayer \n               url='https://a.tile.openstreetmap.org/{z}/{x}/{y}.png'\n              />\n              {position.latitude !== 0\n              && <Marker interactive={false} icon={happyMapIcon} position={[position.latitude,position.longitude]} />\n              }\n\n            </Map>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"name\">Nome</label>\n              <input id=\"name\" value={name} onChange={e => setName(e.target.value)}/>\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"about\">Sobre <span>Máximo de 300 caracteres</span></label>\n              <textarea id=\"name\" maxLength={300} value={about} onChange={e => setAbout(e.target.value)}/>\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"images\">Fotos</label>\n\n              <div className=\"images-container\">\n                {previewImages.map(image=>{\n                  return (\n                    <img key={image} src={image} alt={name}></img>\n                  )\n                })}\n                <label htmlFor=\"image[]\" className=\"new-image\">\n                  <FiPlus size={24} color=\"#15b6d6\" />\n                </label>\n              </div>\n\n              <input multiple type=\"file\" id=\"image[]\" onChange={handleSelectedImages}/>\n\n            </div>\n          </fieldset>\n\n          <fieldset>\n            <legend>Visitação</legend>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"instructions\">Instruções</label>\n              <textarea id=\"instructions\" value={instructions} onChange={e => setInstructions(e.target.value)}/>\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"opening_hours\">Horario de Funcionamento</label>\n              <input id=\"opening_hours\" value={opening_hours} onChange={e => setOpeningHours(e.target.value)}/>\n            </div>\n\n            <div className=\"input-block\">\n              <label htmlFor=\"open_on_weekends\">Atende fim de semana</label>\n\n              <div className=\"button-select\">\n                <button \n                type=\"button\" \n                className={open_on_weekends ? 'active' : ''}\n                onClick= {()=>setOpenOnWeekends(true)} >\n                  Sim\n                  </button>\n                <button \n                type=\"button\"\n                className={!open_on_weekends ? 'active' : ''}\n                onClick= {()=>setOpenOnWeekends(false)}>\n                  Não\n                </button>\n              </div>\n            </div>\n          </fieldset>\n\n          <button className=\"confirm-button\" type=\"submit\">\n            Confirmar\n          </button>\n        </form>\n      </main>\n    </div>\n  );\n}\n\n// return `https://a.tile.openstreetmap.org/${z}/${x}/${y}.png`;\n"]},"metadata":{},"sourceType":"module"}